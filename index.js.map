{"version":3,"file":"index.js","sources":["../src/js/render-function.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGallery = img => {\n  return `\n  <li class=\"gallery-card\">\n  <a href=\"${img.largeImageURL}\" class=\"gallery-link\">\n  <img src=\"${img.webformatURL}\" alt=\"${img.tags}\" class=\"gallery-img\" />\n  </a>\n  <ul class='gallery-li'>\n  <li class='gallery-li-info'>\n  <b>Likes</b>\n  <span class=\"gallery-img-info\">${img.likes}</span>\n  </li>\n  <li class='gallery-li-info'>\n  <b>Views</b>\n  <span class=\"gallery-img-info\">${img.views}</span>\n  </li>\n  <li class='gallery-li-info'>\n  <b>Comments</b>\n   <span class=\"gallery-img-info\">${img.comments}</span>\n   </li>\n  <li class='gallery-li-info'>\n  <b>Downloads</b>\n  <span class=\"gallery-img-info\">${img.downloads}</span>\n  </li>\n</ul>\n</li>\n    `;\n};\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com';\n\nexport const fetchPhotos = (inputValue, page) => {\n  const photosOptions = {\n    params: {\n      key: '45736267-1794b9732fa70958098f9f4da',\n      q: inputValue,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page: page,\n    },\n  };\n  return axios.get(`/api/`, photosOptions);\n};\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\nimport { createGallery } from './js/render-function';\nimport { fetchPhotos } from './js/pixabay-api';\n\nconst form = document.querySelector('.js-search-form');\nconst gallery = document.querySelector('.js-gallery');\nconst loader = document.querySelector('.js-loader');\nconst loadBtn = document.querySelector('.load-btn');\nconst observerEl = document.querySelector('.js-observer');\n\nlet currentPage = 1;\nlet userInputValue = '';\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst observerOptions = {\n  root: null,\n  rootMargin: '0px 0px 400px 0px',\n  threshold: 1,\n};\n\nconst observerCallBack = entries => {\n  if (entries[0].isIntersecting) {\n    console.log('hello');\n  }\n};\n\nconst observer = new IntersectionObserver(observerCallBack, observerOptions);\nconsole.log(observer);\n\nconst onForm = async event => {\n  try {\n    event.preventDefault();\n\n    userInputValue = form.elements.user_query.value;\n\n    loader.classList.remove('is-hidden');\n\n    currentPage = 1;\n\n    const response = await fetchPhotos(userInputValue, currentPage);\n    console.log(response);\n\n    if (response.data.total === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    }\n    const galleryCardList = response.data.hits\n      .map(imgInfo => createGallery(imgInfo))\n      .join('');\n\n    gallery.innerHTML = galleryCardList;\n\n    observer.observe(observerEl);\n\n    loadBtn.classList.remove('is-hidden');\n\n    lightbox.refresh();\n  } catch (error) {\n    console.log(error);\n  }\n\n  loader.classList.add('is-hidden');\n  form.reset();\n};\n\nconst onLoadBtnClick = async () => {\n  try {\n    currentPage++;\n    const response = await fetchPhotos(userInputValue, currentPage);\n    const galleryCardList = response.data.hits\n      .map(imgInfo => createGallery(imgInfo))\n      .join('');\n\n    gallery.insertAdjacentHTML('beforeend', galleryCardList);\n\n    loadBtn.classList.remove('is-hidden');\n\n    lightbox.refresh();\n\n    if (currentPage === response.data.totalHits) {\n      loadBtn.classList.add('is-hidden');\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nform.addEventListener('submit', onForm);\nloadBtn.addEventListener('click', onLoadBtnClick);\n"],"names":["createGallery","img","axios","fetchPhotos","inputValue","page","photosOptions","form","gallery","loader","loadBtn","observerEl","currentPage","userInputValue","lightbox","SimpleLightbox","observerOptions","observerCallBack","entries","observer","onForm","event","response","iziToast","galleryCardList","imgInfo","error","onLoadBtnClick"],"mappings":"owBAAO,MAAMA,EAAgBC,GACpB;AAAA;AAAA,aAEIA,EAAI,aAAa;AAAA,cAChBA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,mCAKbA,EAAI,KAAK;AAAA;AAAA;AAAA;AAAA,mCAITA,EAAI,KAAK;AAAA;AAAA;AAAA;AAAA,oCAIRA,EAAI,QAAQ;AAAA;AAAA;AAAA;AAAA,mCAIbA,EAAI,SAAS;AAAA;AAAA;AAAA;AAAA,MCnBhDC,EAAM,SAAS,QAAU,sBAElB,MAAMC,EAAc,CAACC,EAAYC,IAAS,CAC/C,MAAMC,EAAgB,CACpB,OAAQ,CACN,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMC,CACP,CACL,EACE,OAAOH,EAAM,IAAI,QAASI,CAAa,CACzC,ECXMC,EAAO,SAAS,cAAc,iBAAiB,EAC/CC,EAAU,SAAS,cAAc,aAAa,EAC9CC,EAAS,SAAS,cAAc,YAAY,EAC5CC,EAAU,SAAS,cAAc,WAAW,EAC5CC,EAAa,SAAS,cAAc,cAAc,EAExD,IAAIC,EAAc,EACdC,EAAiB,GAEjBC,EAAW,IAAIC,EAAe,aAAc,CAC9C,SAAU,GACV,aAAc,MACd,aAAc,GAChB,CAAC,EAED,MAAMC,EAAkB,CACtB,KAAM,KACN,WAAY,oBACZ,UAAW,CACb,EAEMC,EAAmBC,GAAW,CAC9BA,EAAQ,CAAC,EAAE,gBACb,QAAQ,IAAI,OAAO,CAEvB,EAEMC,EAAW,IAAI,qBAAqBF,EAAkBD,CAAe,EAC3E,QAAQ,IAAIG,CAAQ,EAEpB,MAAMC,EAAS,MAAMC,GAAS,CAC5B,GAAI,CACFA,EAAM,eAAc,EAEpBR,EAAiBN,EAAK,SAAS,WAAW,MAE1CE,EAAO,UAAU,OAAO,WAAW,EAEnCG,EAAc,EAEd,MAAMU,EAAW,MAAMnB,EAAYU,EAAgBD,CAAW,EAC9D,QAAQ,IAAIU,CAAQ,EAEhBA,EAAS,KAAK,QAAU,GAC1BC,EAAS,MAAM,CACb,QACE,0EACV,CAAO,EAEH,MAAMC,EAAkBF,EAAS,KAAK,KACnC,IAAIG,GAAWzB,EAAcyB,CAAO,CAAC,EACrC,KAAK,EAAE,EAEVjB,EAAQ,UAAYgB,EAEpBL,EAAS,QAAQR,CAAU,EAE3BD,EAAQ,UAAU,OAAO,WAAW,EAEpCI,EAAS,QAAO,CACjB,OAAQY,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CAEDjB,EAAO,UAAU,IAAI,WAAW,EAChCF,EAAK,MAAK,CACZ,EAEMoB,EAAiB,SAAY,CACjC,GAAI,CACFf,IACA,MAAMU,EAAW,MAAMnB,EAAYU,EAAgBD,CAAW,EACxDY,EAAkBF,EAAS,KAAK,KACnC,IAAIG,GAAWzB,EAAcyB,CAAO,CAAC,EACrC,KAAK,EAAE,EAEVjB,EAAQ,mBAAmB,YAAagB,CAAe,EAEvDd,EAAQ,UAAU,OAAO,WAAW,EAEpCI,EAAS,QAAO,EAEZF,IAAgBU,EAAS,KAAK,YAChCZ,EAAQ,UAAU,IAAI,WAAW,EACjCa,EAAS,KAAK,CACZ,QAAS,4DACjB,CAAO,EAEJ,OAAQG,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,EAEAnB,EAAK,iBAAiB,SAAUa,CAAM,EACtCV,EAAQ,iBAAiB,QAASiB,CAAc"}